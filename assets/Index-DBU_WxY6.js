import{r as x,u as M,s as U}from"./menu-BG4fEp25.js";import{e as v,L as y,g as C,f as H,h as D,j as E,C as T,l as A,m as Y,k as O}from"./index-CFNcU0YK.js";import{d as j}from"./dayjs-DWuKVjmt.js";import{_ as R}from"./Create.vue_vue_type_script_setup_true_lang-CMNp5uBz.js";import{_ as B}from"./Update.vue_vue_type_script_setup_true_lang-CSOnaKoO.js";import{e as K,f as L}from"./element-plus-A1T5m3oM.js";import{af as o,d as N,r as w,m as V,ag as h,aq as q,c as z,o as J,R as b,u as d,J as F,K as G}from"./@vue-BpwAlabI.js";import"./pinia-BW-Ptvox.js";import"./msw-Ve9Ip08e.js";import"./@open-draft-BbAaxlxc.js";import"./is-node-process-BZ-2HBMI.js";import"./outvariant-BBS2yBlX.js";import"./strict-event-emitter-CrFXw_VT.js";import"./@mswjs--W5AcoDd.js";import"./@bundled-es-modules-DDnD6D9h.js";import"./path-to-regexp-wCvGX3Wm.js";import"./headers-polyfill-C4bzlTWf.js";import"./qs-BNjWm72D.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./es-errors-CFxpeikN.js";import"./side-channel-CKpA4dfz.js";import"./object-inspect-CiOUnV34.js";import"./side-channel-list-IZ6ufBWj.js";import"./side-channel-map-BvuNa93F.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-CmoVxQN_.js";import"./vue-i18n-CJu5jhK-.js";import"./@intlify-qjRvhfuG.js";import"./vue-router-Czm1P09_.js";import"./axios-t--hEgTQ.js";import"./@vueuse-DlNcspcR.js";import"./color-Cwf1wIF_.js";import"./color-string-CKWVXYG4.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-Tvclth0e.js";import"./color-convert-CkRI355n.js";import"./vue-cropper-mJCAEvi3.js";import"./@element-plus-CrghIkfH.js";import"./sortablejs-C83syoBY.js";import"./nprogress-fpr8O7K9.js";import"./lodash-es-S0Y0Up6J.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DwceP2Gb.js";import"./Form.vue_vue_type_script_setup_true_lang-grfKFc-Z.js";var i=(r=>(r.Create="create_administrator_menu",r.Update="update_administrator_menu",r.Remove="remove_administrator_menu",r))(i||{});const Q=(r,n)=>{const l=v([i.Create]),s=v([i.Update]),p=v([i.Remove]),f=[{prop:"id",label:"菜单编号",defaultHide:!0},{prop:"name",label:"菜单名称",alwaysShow:!0,defaultComponent:({row:{icon:e,name:t}})=>[o(L,()=>[e&&o(K,{size:20},()=>[o(T[e])]),o("span",t)])]},{prop:"path",label:"菜单路径",showOverflowTooltip:!0},{prop:"parent",label:"父级菜单",defaultHide:!0,showOverflowTooltip:!0,defaultComponent:({row:e})=>{var t;return[o("div",(t=e.parent)==null?void 0:t.path)]}},{prop:"acls",label:"权限标识",showOverflowTooltip:!0},{prop:"stem",label:"翻译标识",defaultHide:!0},{prop:"sort",label:"菜单顺序",defaultHide:!0},{prop:"createAt",label:"创建时间"},{prop:"status",label:"菜单状态",headerComponent:({column:e})=>[o(Y,{column:e,status:n.value.status,onChange(t){n.value.pageNo=1,n.value.status=t,r.execute(n.value)}})],defaultComponent:({row:e})=>{const t=M(e.id);return[o(A,{service:t,status:e.status,permission:[i.Update],onRefresh:r.refresh})]}}],_=[l,s,p].filter(e=>e);return _.length&&f.push({prop:"$",label:"管理操作",width:Math.max(120,_.length*80),defaultComponent:({row:e})=>[o(E,()=>{const t=[];if(l&&t.push(o(y,{onClick:()=>{const a=C(o(R,{parentId:e.id,onRefresh:()=>{a.close(),r.refresh()}}),{type:"create"})}},()=>"新增下级")),s&&t.push(o(H,{onClick:()=>{const a=C(o(B,{row:e,onRefresh:()=>{a.close(),r.refresh()}}),{type:"update"})}})),p){const a=x(e.id);t.push(o(D,{service:a,onRefresh:r.refresh}))}return t})]}),{columns:f,schemas:[{tag:"ElInput",formItemProps:{prop:"name",label:"菜单名称"}},{tag:"ElInput",formItemProps:{prop:"path",label:"菜单路径"}}]}},Se=N({__name:"Index",setup(r){const n=()=>({}),l=w(n()),s=U(),p=w(n()),f={rowKey:"id"},_=V(()=>{var m;const a=(((m=s.result.value)==null?void 0:m.data)??[]).map(u=>(u.createAt=j(u.createAt).format("YYYY-MM-DD HH:mm:ss"),u));return O(a)}),{columns:g,schemas:e}=Q(s,p),t=()=>{const a=C(o(R,{onRefresh:()=>{a.close(),s.refresh()}}),{type:"create"})};return s.execute(p.value),(a,m)=>{const u=h("common-search"),I=h("widget-create"),$=h("common-table"),k=q("acl");return J(),z("div",null,[b(u,{model:l.value,"onUpdate:model":m[0]||(m[0]=c=>l.value=c),params:p.value,"onUpdate:params":m[1]||(m[1]=c=>p.value=c),service:d(s),"init-value":n,schemas:d(e)},null,8,["model","params","service","schemas"]),b($,{params:p.value,"onUpdate:params":m[2]||(m[2]=c=>p.value=c),data:_.value,columns:d(g),service:d(s),"table-props":f},{"toolbar-right":F(()=>[G(b(I,{onClick:t},null,512),[[k,[d(i).Create]]])]),_:1},8,["params","data","columns","service"])])}}});export{Se as default};
