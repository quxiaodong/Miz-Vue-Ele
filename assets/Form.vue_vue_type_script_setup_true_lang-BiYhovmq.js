import{s as b}from"./menu-BG4fEp25.js";import{n as I,i as r,k as V}from"./index-CFNcU0YK.js";import{d as k,aA as u,ay as R,aB as y,m as n,ag as c,I as B,o as P,u as x,J as C,a as E,R as M,r as S}from"./@vue-BpwAlabI.js";const w={class:"text-right"},A=k({__name:"Form",props:u({loading:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:u(["submit"],["update:modelValue"]),setup(d,{emit:p}){const i=p,a=R("dom"),t=y(d,"modelValue"),f=n(()=>({name:r(),code:r(),menuId:I()})),g=()=>{const e=S([]);return b().execute({}).then(({data:o})=>e.value=o),{schemas:n(()=>[{tag:"ElInput",formItemProps:{prop:"name",label:"按钮名称"}},{tag:"ElInput",formItemProps:{prop:"code",label:"按钮代码"}},{tag:"ElTreeSelect",tagProps:{value:t.value.menuId,data:V(e.value.map(({id:o,name:l,parentId:m,sort:h})=>({id:o,parentId:m,sort:h,value:o,label:l}))),checkStrictly:!0,filterable:!0},formItemProps:{prop:"menuId",label:"所属菜单"}},{tag:"ElSelect",formItemProps:{prop:"status",label:"按钮状态"}}])}},{schemas:v}=g(),_=()=>{var e;(e=a.value)!=null&&e.formRef&&a.value.formRef.validate().then(()=>i("submit"))};return(e,s)=>{const o=c("widget-submit"),l=c("common-form");return P(),B(l,{ref_key:"dom",ref:a,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=m=>t.value=m),rules:f.value,schemas:x(v)},{default:C(()=>[E("div",w,[M(o,{loading:e.loading,onClick:_},null,8,["loading"])])]),_:1},8,["modelValue","rules","schemas"])}}});export{A as _};
