import{i,k as _,C as m,t as E}from"./index-CFNcU0YK.js";import{d as V,aA as d,ay as w,aB as k,m as f,ag as l,I as C,o as S,u as y,J as B,a as R,R as a,af as P,O as j,aa as M}from"./@vue-BpwAlabI.js";const N={class:"text-right"};function u(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!M(r)}const z=V({__name:"Form",props:d({loading:{type:Boolean},parentList:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:d(["submit"],["update:modelValue"]),setup(r,{emit:b}){const g=b,n=w("dom"),o=k(r,"modelValue"),I=f(()=>({name:i(),path:i()})),v=()=>({schemas:f(()=>[{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"name",label:"菜单名称"}},{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"path",label:"路由地址"}},{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"component",label:"页面文件"}},{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"link",label:"外部链接"}},{colProps:{span:12,xs:24},tag:"ElTreeSelect",tagProps:{value:o.value.parentId,data:_(r.parentList.map(({id:e,name:t,parentId:s,sort:c})=>({id:e,parentId:s,sort:c,value:e,label:t}))),checkStrictly:!0,filterable:!0,clearable:!0,onClear:()=>o.value.parentId=null},formItemProps:{prop:"parentId",label:"父级菜单"}},{colProps:{span:12,xs:24},formItemProps:{prop:"icon",label:"菜单图标"},component:()=>a(l("el-popover"),{teleported:!1,trigger:"click","popper-class":"!w-full"},{reference:()=>a("div",{class:"w-full"},[a(l("el-input"),{modelValue:o.value.icon,clearable:!0,placeholder:E("common.please-select"),onClear:()=>o.value.icon=null},{prefix:()=>{let e;return o.value.icon&&a(l("el-icon"),{size:"20"},u(e=P(m[o.value.icon]))?e:{default:()=>[e]})}})]),default:()=>{let e;return a(l("el-space"),{wrap:!0,class:"h-28 overflow-auto"},u(e=Object.values(m).map(({name:t})=>{let s;return a(l("el-icon"),{size:"20",color:o.value.icon===t?"var(--el-color-primary)":"#909399",class:"cursor-pointer",onClick:()=>o.value.icon=t},u(s=P(m[t]))?s:{default:()=>[s]})}))?e:{default:()=>[e]})}})},{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"acls",label:"权限标识"}},{colProps:{span:12,xs:24},tag:"ElInput",formItemProps:{prop:"stem",label:"翻译标识"}},{colProps:{span:12,xs:24},tag:"ElInput",tagProps:{formatter:e=>e.replace(/[^0-9]/g,""),parser:e=>e.replace(/[^0-9]/g,"")},formItemProps:{prop:"sort",label:"菜单排序"}},{colProps:{span:12,xs:24},tag:"ElSelect",formItemProps:{prop:"status",label:"菜单状态"}},{component:()=>a(l("el-divider"),null,{default:()=>[j("其他设置")]})},{colProps:{span:8,xs:12},tag:"ElSwitch",formItemProps:{prop:"hideInMenu",label:"隐藏菜单",labelPosition:"left"}},{colProps:{span:8,xs:12},tag:"ElSwitch",formItemProps:{prop:"cache",label:"缓存页面",labelPosition:"left"}},{colProps:{span:8,xs:12},tag:"ElSwitch",formItemProps:{prop:"embed",label:"是否内嵌",labelPosition:"left"}}])}),{schemas:h}=v(),x=()=>{var p;(p=n.value)!=null&&p.formRef&&n.value.formRef.validate().then(()=>g("submit"))};return(p,e)=>{const t=l("widget-submit"),s=l("common-form");return S(),C(s,{ref_key:"dom",ref:n,modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value=c),rules:I.value,schemas:y(h)},{default:B(()=>[R("div",N,[a(t,{loading:p.loading,onClick:x},null,8,["loading"])])]),_:1},8,["modelValue","rules","schemas"])}}});export{z as _};
