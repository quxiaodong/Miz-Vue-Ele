import{p as v}from"./user-DnsQ2kUu.js";import{i as P,p as R,t as b}from"./index-CFNcU0YK.js";import{d as x,ay as I,r as V,m as C,ag as r,I as k,o as y,J as B,a as E,R as N,u as m}from"./@vue-BpwAlabI.js";const U={class:"text-right"},T=x({__name:"Password",props:{row:{}},emits:["close"],setup(n,{emit:l}){const d=l,t=I("dom"),e=V({id:n.row.id,password1:"",password2:""}),p=C(()=>({password1:R(),password2:[...P(),{validator:(s,o,a)=>{e.value.password1!==o&&a(b("common:validate.password2-not-equal")),a()},trigger:"blur"}]})),u=()=>({schemas:[{tag:"ElInput",tagProps:{showPassword:!0},formItemProps:{prop:"password1",label:"新的密码"}},{tag:"ElInput",tagProps:{showPassword:!0},formItemProps:{prop:"password2",label:"确认密码"}}]}),{schemas:c}=u(),{execute:i,loading:f}=v(),w=()=>{var s;(s=t.value)!=null&&s.formRef&&t.value.formRef.validate().then(_)},_=()=>i(e.value).then(()=>d("close"));return(s,o)=>{const a=r("widget-submit"),g=r("common-form");return y(),k(g,{ref_key:"dom",ref:t,modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=h=>e.value=h),rules:p.value,schemas:m(c)},{default:B(()=>[E("div",U,[N(a,{loading:m(f),onClick:w},null,8,["loading"])])]),_:1},8,["modelValue","rules","schemas"])}}});export{T as _};
