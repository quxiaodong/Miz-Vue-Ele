import{e as h,f as C,g as I,B as R,h as $,j as w,y as U,x as y,l as A,m as D,D as E}from"./index-CFNcU0YK.js";import{d as M}from"./dayjs-DWuKVjmt.js";import{P as d,_ as T}from"./Create.vue_vue_type_script_setup_true_lang-51XWAPWq.js";import{_ as Y}from"./Update.vue_vue_type_script_setup_true_lang-DS_HPvNZ.js";import{af as m,r as _,m as g,d as k,ag as b,c as B,o as H,R as v,u as n,J as N}from"./@vue-BpwAlabI.js";import"./pinia-BW-Ptvox.js";import"./msw-Ve9Ip08e.js";import"./@open-draft-BbAaxlxc.js";import"./is-node-process-BZ-2HBMI.js";import"./outvariant-BBS2yBlX.js";import"./strict-event-emitter-CrFXw_VT.js";import"./@mswjs--W5AcoDd.js";import"./@bundled-es-modules-DDnD6D9h.js";import"./path-to-regexp-wCvGX3Wm.js";import"./headers-polyfill-C4bzlTWf.js";import"./qs-BNjWm72D.js";import"./call-bind-apply-helpers-zm886y3p.js";import"./function-bind-CHqF18-c.js";import"./es-errors-CFxpeikN.js";import"./side-channel-CKpA4dfz.js";import"./object-inspect-CiOUnV34.js";import"./side-channel-list-IZ6ufBWj.js";import"./side-channel-map-BvuNa93F.js";import"./get-intrinsic-DYXGad5I.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-CQl1k7Za.js";import"./dunder-proto-tAQ_MH3o.js";import"./hasown-DwiY0sux.js";import"./call-bound-DTEBmFVe.js";import"./side-channel-weakmap-CmoVxQN_.js";import"./vue-i18n-CJu5jhK-.js";import"./@intlify-qjRvhfuG.js";import"./vue-router-Czm1P09_.js";import"./axios-t--hEgTQ.js";import"./element-plus-A1T5m3oM.js";import"./lodash-es-S0Y0Up6J.js";import"./@element-plus-CrghIkfH.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DwceP2Gb.js";import"./@vueuse-DlNcspcR.js";import"./color-Cwf1wIF_.js";import"./color-string-CKWVXYG4.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-Tvclth0e.js";import"./color-convert-CkRI355n.js";import"./vue-cropper-mJCAEvi3.js";import"./sortablejs-C83syoBY.js";import"./nprogress-fpr8O7K9.js";import"./Form.vue_vue_type_script_setup_true_lang-DJkkGcRl.js";const P=(p,t)=>{const i=h([d.Update]),a=h([d.Remove]),r=[{prop:"id",label:"翻译编号",defaultHide:!0},{prop:"stem",label:"翻译标识",alwaysShow:!0},{prop:"text",label:"翻译内容",showOverflowTooltip:!0},{prop:"locale",label:"所属语言",defaultComponent:({row:{locale:o}})=>[m("div",o.icon+" "+o.name)]},{prop:"createAt",label:"创建时间"},{prop:"status",label:"翻译状态",headerComponent:({column:o})=>[m(D,{column:o,status:t.value.status,onChange(e){t.value.pageNo=1,t.value.status=e,p.execute(t.value)}})],defaultComponent:({row:o})=>{const e=y(o.id);return[m(A,{service:e,status:o.status,permission:[d.Update],onRefresh:p.refresh})]}}],u=[i,a].filter(o=>o);u.length&&r.push({prop:"$",label:"管理操作",width:Math.max(120,u.length*80),defaultComponent:({row:o})=>[m(w,()=>{const e=[];if(i&&e.push(m(C,{onClick:()=>{const s=I(m(Y,{row:o,onRefresh:()=>{s.close(),p.refresh()}}),{type:"update"})}})),a){const s=R(o.id);e.push(m($,{service:s,onRefresh:p.refresh}))}return e})]});const c=_([]);U().execute({}).then(({data:o})=>c.value=o);const f=[{tag:"ElInput",formItemProps:{prop:"stem",label:"翻译标识"}},{tag:"ElInput",formItemProps:{prop:"text",label:"翻译内容"}},{tag:"ElSelect",tagProps:{class:"!w-[178px] sm:!w-full",clearable:!0,onClear:()=>t.value.localeId=void 0},formItemProps:{prop:"localeId",label:"所属语言"},options:g(()=>c.value.map(({id:o,icon:e,name:s})=>({value:o,label:e+" "+s})))}];return{columns:r,schemas:f}},Jo=k({__name:"Index",setup(p){const t=()=>({pageNo:1,pageSize:10}),i=_(t()),a=E(),r=_(t()),u=g(()=>{var o;return(((o=a.result.value)==null?void 0:o.data)??[]).map(e=>(e.createAt=M(e.createAt).format("YYYY-MM-DD HH:mm:ss"),e))}),{columns:c,schemas:f}=P(a,r);return a.execute(r.value),(o,e)=>{const s=b("common-search"),x=b("common-table");return H(),B("div",null,[v(s,{model:i.value,"onUpdate:model":e[0]||(e[0]=l=>i.value=l),params:r.value,"onUpdate:params":e[1]||(e[1]=l=>r.value=l),service:n(a),"init-value":t,schemas:n(f)},null,8,["model","params","service","schemas"]),v(x,{params:r.value,"onUpdate:params":e[2]||(e[2]=l=>r.value=l),data:u.value,columns:n(c),service:n(a)},{"toolbar-right":N(()=>[v(T,{onRefresh:n(a).refresh},null,8,["onRefresh"])]),_:1},8,["params","data","columns","service"])])}}});export{Jo as default};
